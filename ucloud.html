
<!DOCTYPE html>
<html lang="en" dir="LTR" class="directionLtr ">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Loading... - VerseDrive</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Your Account Home" />
        <meta name="keywords" content="account, home, file, your, interface, upload, download, site" />
        <meta name="copyright" content="Copyright &copy; - VerseDrive" />
        <meta name="robots" content="all" />
        <meta http-equiv="Cache-Control" content="no-cache" />
        <meta http-equiv="Expires" content="-1" />
        <meta http-equiv="Pragma" content="no-cache" />

        <!-- og meta tags -->
                    <meta property="og:title" content="Loading..." />
                            <meta property="og:image" content="https://versesai.online/themes/evolution/assets/images/favicon/ms-icon-144x144.png" />
                <meta property="og:type" content="website" />

        <!-- fav and touch icons -->
        <link rel="icon" type="image/x-icon" href="https://versesai.online/themes/evolution/assets/images/favicon/favicon.ico" />
        <link rel="icon" type="image/png" sizes="96x96" href="https://versesai.online/themes/evolution/assets/images/favicon/favicon-96x96.png">
        <link rel="apple-touch-icon" sizes="152x152" href="https://versesai.online/themes/evolution/assets/images/favicon/apple-icon-152x152.png">
        <link rel="manifest" href="https://versesai.online/themes/evolution/assets/images/favicon/manifest.json">
        <meta name="msapplication-TileImage" content="https://versesai.online/themes/evolution/assets/images/favicon/ms-icon-144x144.png">
        <meta name="msapplication-TileColor" content="#ffffff">
        <meta name="theme-color" content="#ffffff">

        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/fonts.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/font-icons/entypo/css/entypo.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/font-icons/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/bootstrap.css" />
                    <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/skins/default.css" />
                <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/core.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/theme.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/forms.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/responsive.css" />
                <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/daterangepicker-bs3.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/custom.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/file-upload.css" />
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/search_widget.css" />
        <link rel="stylesheet" type="text/css"  href="https://versesai.online/plugins/filepreviewer/assets/players/ultimate/content/global.css"/>
        

        <script src="https://versesai.online/themes/evolution/assets/js/jquery-1.11.0.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.ckie.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.jstree.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.event.drag-2.2.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.event.drag.live-2.2.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.event.drop-2.2.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.event.drop.live-2.2.js"></script>

        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/file_browser_sprite_48px.css" type="text/css" charset="utf-8" />

        <link rel="stylesheet" type="text/css" href="https://versesai.online/themes/evolution/assets/js/slick/slick.css"/>

        <link rel="stylesheet" type="text/css" href="https://versesai.online/themes/evolution/assets/js/slick/slick-theme.css"/>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/slick/slick.js"></script>

        <link rel="stylesheet" type="text/css" href="https://versesai.online/themes/evolution/assets/js/photo-swipe/photoswipe.css"/>
        <link rel="stylesheet" type="text/css" href="https://versesai.online/themes/evolution/assets/js/photo-swipe/default-skin/default-skin.css"/>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/photo-swipe/photoswipe.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/photo-swipe/photoswipe-ui-default.min.js"></script>

        <!-- mobile swipe navigation -->
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.touchSwipe.min.js"></script>

        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/evolution.js"></script>
        <script type="text/javascript" src="https://versesai.online/assets/js/uploader.js?r=1709317623"></script>

        <!--[if lt IE 9]><script src="https://versesai.online/themes/evolution/assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
                <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script type="text/javascript">
            document.domain = 'versesai.online';
            var ACCOUNT_WEB_ROOT = "https://versesai.online/account";
            var SITE_THEME_WEB_ROOT = "https://versesai.online/themes/";
            var SITE_CSS_PATH = "https://versesai.online/themes/evolution/assets/styles";
            var SITE_IMAGE_PATH = "https://versesai.online/themes/evolution/assets/images";
            var _CONFIG_SITE_PROTOCOL = "https";
            var CORE_AJAX_WEB_ROOT = "";
            var LOGGED_IN = true;
        </script>
        <script type="text/javascript" src="https://versesai.online/js/translations.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery-ui.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.dataTables.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.tmpl.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/load-image.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/canvas-to-blob.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.iframe-transport.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.fileupload.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.fileupload-process.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.fileupload-resize.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.fileupload-validate.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/jquery.fileupload-ui.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/zeroClipboard/ZeroClipboard.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/daterangepicker/moment.min.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/daterangepicker/daterangepicker.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/charts/Chart.js"></script>
        <script type="text/javascript" src="https://versesai.online/plugins/filepreviewer/assets/players/ultimate/java/FWDUVPlayer.js"></script>
        <script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/global.js"></script>
        <link rel="stylesheet" href="https://versesai.online/themes/evolution/assets/styles/file_browser_sprite_48px.css" type="text/css" charset="utf-8" />

<script type="text/javascript">
    var cur = -1, prv = -1;
    var pageStart = 0;
    var perPage = 30;
    var fileId = 0;
    var intialLoad = true;
    var uploaderShown = false;
    var fromFilterModal = false;
    var doubleClickTimeout = null;
    var backgroundFolderLoading = false;
    var clipboard = null;
    var triggerTreeviewLoad = true;
    $(function () {
        // initial button state
        updateFileActionButtons();
        
                // load folder listing
        $("#folderTreeview").jstree({
            "plugins": [
                "themes", "json_data", "ui", "types", "crrm", "contextmenu", "cookies"
            ],
            "themes": {
                "theme": "default",
                "dots": false,
                "icons": true
            },
            "core": {"animation": 150},
            "json_data": {
                "data": [
                    {
                        "data": "My Files (1)",
                        "state": "closed",
                        "attr": {"pageType": "folder", "id": "-1", "rel": "home", "original-text": "My Files"}
                    },
                    {
                        "data": "Shared With Me",
                        "attr": {"pageType": "shared", "id": "shared", "rel": "shared", "original-text": "Shared With Me"}
                    },
                    {
                        "data": "Recent Files",
                        "attr": {"pageType": "recent", "id": "recent", "rel": "recent", "original-text": "Recent Files"}
                    },
                    {
                        "data": "All Files (1)",
                        "attr": {"pageType": "all", "id": "all", "rel": "all", "original-text": "All Files"}
                    },
                    {
                        "data": "Trash Can (1)",
                        "attr": {"pageType": "trash", "id": "trash", "rel": "bin", "original-text": "Trash Can"}
                    }
                ],
                "ajax": {
                    "url": function (node) {
                        var nodeId = "";
                        var url = ""
                        if (node == -1)
                        {
                            url = "https://versesai.online/account/ajax/home_v2_folder_listing";
                        }
                        else
                        {
                            nodeId = node.attr('id');
                            url = "https://versesai.online/account/ajax/home_v2_folder_listing?folder=" + nodeId;
                        }

                        return url;
                    }
                }
            },
            "contextmenu": {
                "items": buildTreeViewContextMenu
            },
            'progressive_render': true
        }).bind("dblclick.jstree", function (event, data) {
            var node = $(event.target).closest("li");
            if ($(node).hasClass('jstree-leaf') == true)
            {
                return false;
            }

            //$("#folderTreeview").jstree("toggle_node", node.data("jstree"));
        }).bind("select_node.jstree", function (event, data) {
            // use this to stop the treeview from triggering a reload of the file manager
            if(triggerTreeviewLoad == false)
            {
                triggerTreeviewLoad = true;
                return false;
            }

            // add a slight delay encase this is a double click
            if (intialLoad == false)
            {
                // wait before loading the files, just encase this is a double click
                clickTreeviewNode(event, data);
                return false;
            }

            clickTreeviewNode(event, data);
        }).bind("load_node.jstree", function (event, data) {
            // assign click to icon
            assignNodeExpandClick();
            reSelectFolder();
        }).bind("open_node.jstree", function (event, data) {
            // reassign drag crop for sub-folder
            setupTreeviewDropTarget();
        }).delegate("a", "click", function (event, data) {
            event.preventDefault();
        }).bind('loaded.jstree', function (e, data) {
            // load default view if not stored in cookie
            var doIntial = true;
            if (typeof ($.cookie("jstree_open")) != "undefined")
            {
                if ($.cookie("jstree_open").length > 0)
                {
                    doIntial = false;
                }
            }

            if (doIntial == true)
            {
                $("#folderTreeview").jstree("open_node", $("#-1"));
            }

            // reload stats
            updateStatsViaAjax();
        });

        var doIntial = true;
        if (typeof ($.cookie("jstree_select")) != "undefined")
        {
            if ($.cookie("jstree_select").length > 0)
            {
                doIntial = false;
            }
        }
        if (doIntial == true)
        {
            // load file listing
            $('#nodeId').val('-1');
        }

        $("#fileManager").click(function (event) {
            if (ctrlPressed == false)
            {
                if ($(event.target).is('ul') || $(event.target).hasClass('fileManager')) {
                    clearSelectedItems();
                }
            }
        });

        setupFileDragSelect();
        
        // load the uploader ready in the background. This also enables the drag and drop upload
        loadUploader(false);
            });

    function assignNodeExpandClick()
    {
        $('.jstree-icon').off('click');
        $('.jstree-icon').on('click', function (event) {
            var node = $(event.target).parent().parent();
            if ($(node).hasClass('jstree-leaf') != true)
            {
                // expand
                $("#folderTreeview").jstree("toggle_node", $(node));

                // stop the node from being selected
                event.stopPropagation();
                event.preventDefault();
            }
        });
    }

    function clickTreeviewNode(event, data)
    {
        clearSelectedItems();
        clearSearchFilters(false);
	cancelPendingNetworkRequests();

        // load via ajax
        if (intialLoad == true)
        {
            intialLoad = false;
        }
        else
        {
            $('#nodeId').val(data.rslt.obj.attr("id"));
            $('#folderIdDropdown').val($('#nodeId').val());
            if (typeof (setUploadFolderId) === 'function')
            {
                setUploadFolderId($('#nodeId').val());
            }
            loadImages(data.rslt.obj.attr("pageType"), data.rslt.obj.attr("id"));
        }
    }
	
    function cancelPendingNetworkRequests()
    {
        // disabled due to adverse side effects on refresh
        return false;

        // don't cancel if we're uploading files
        if(uploadComplete == false)
        {
            return false;
        }

        if(window.stop !== undefined)
        {
            window.stop();
        }
        else if(document.execCommand !== undefined)
        {
            document.execCommand("Stop", false);
        }
    }

    function updateFolderDropdownMenuItems()
    {
        // not a sub folder
        if (isPositiveInteger($('#nodeId').val()) == false)
        {
            $('#subFolderOptions').hide();
            $('#topFolderOptions').show();
        }
        // all sub folders / menu options
        else
        {
            $('#topFolderOptions').hide();
            $('#subFolderOptions').show();
        }
    }

    function reloadDragItems()
    {
        $('.fileIconLi, .folderIconLi')
                .drop("start", function () {
                    $(this).removeClass("active");
                    if ($(this).hasClass("selected") == false)
                    {
                        $(this).addClass("active");
                    }
                })
                .drop(function (ev, dd) {
                    if(typeof($(this).attr('fileId')) != 'undefined') {
                        selectFile($(this).attr('fileId'), true);
                    }
                    else {
                        selectFolder($(this).attr('folderId'), true);
                    }
                })
                .drop("end", function () {
                    $(this).removeClass("active");
                });
        $.drop({multi: true});
    }

    function refreshFolderListing(triggerLoad)
    {
		if(typeof(triggerLoad) != "undefined")
		{
			triggerTreeviewLoad = triggerLoad;
		}
		
        $("#folderTreeview").jstree("refresh");
    }

    function buildTreeViewContextMenu(node)
    {
        var items = {
            "Open": {
                "label": "Open Folder",
                                    "icon": "glyphicon glyphicon-folder-open",
                "separator_after": false,
                "action": function (obj) {
                    loadImages(obj.attr("pageType"), obj.attr("id"));
                }
            }
        };

        if ($(node).attr('id') == 'trash')
        {
            items["Empty"] = {
                    "label": "Empty Trash",
					"icon": "glyphicon glyphicon-trash",
                    "action": function (obj) {
                        confirmEmptyTrash();
                    }
                };
        }
        else if ($(node).attr('id') == '-1')
        {
            items["Upload"] = {
                    "label": "Upload Files",
					"icon": "glyphicon glyphicon-cloud-upload",
                    "separator_after": true,
                    "action": function (obj) {
                        uploadFiles('');
                    }
                };
                
            items["Add"] = {
                    "label": "Add Folder",
					"icon": "glyphicon glyphicon-plus",
                    "action": function (obj) {
                        showAddFolderForm(obj.attr("id"));
                    }
                };
        }
        else if ($.isNumeric($(node).attr('id')))
        {
            if($(node).attr('permission') != 'view')
            {
                items["Upload"] = {
                        "label": "Upload Files",
                                            "icon": "glyphicon glyphicon-cloud-upload",
                        "separator_after": true,
                        "action": function (obj) {
                            uploadFiles(obj.attr("id"));
                        }
                    };
            }
                
            if($(node).attr('permission') == 'all')
            {
                items["Add"] = {
                        "label": "Add Sub Folder",
                                            "icon": "glyphicon glyphicon-plus",
                        "action": function (obj) {
                            showAddFolderForm(obj.attr("id"));
                        }
                    };
                items["Edit"] = {
                        "label": "Edit",
                                            "icon": "glyphicon glyphicon-pencil",
                        "action": function (obj) {
                            showAddFolderForm(null, obj.attr("id"));
                        }
                    };
                items["Delete"] = {
                        "label": "Delete",
                                            "icon": "glyphicon glyphicon-trash",
                        "action": function (obj) {
                            confirmTrashFolder(obj.attr("id"));
                        }
                    };
            }
            
            if($(node).attr('permission') != 'view')
            {
                items["Download"] = {
                        "label": "Download All Files (Zip)",
                                            "icon": "glyphicon glyphicon-floppy-save",
                        "separator_before": true,
                        "action": function (obj) {
                            downloadAllFilesFromFolder(obj.attr("id"));
                        }
                    };
            }

            if($(node).attr('permission') == 'all')
            {
                items["Share"] = {
                        "label": "Share Folder",
                            "icon": "glyphicon glyphicon-share",
                        "action": function (obj) {
                            showSharingForm(obj.attr("id"));
                        }
                    };
            }
            
            items["HtmlMenuSection"] = {
                    "label": "<span class='menu-folder-details'><ul><li>Owner: "+$(node).attr('owner')+"</li><li>Access Rights: "+uCWords($(node).attr('permission').replace('_', ' '))+"</li><li>Size: "+$(node).attr('total_size')+"</li></ul></span>",
                    "separator_before": true,
                    "action": function (obj) {
                        loadImages(obj.attr("pageType"), obj.attr("id"));
                    }
                };
        }

        return items;
    }

    function confirmTrashFolder(folderId)
    {
        // only allow actual sub folders
        if (isPositiveInteger(folderId) == false)
        {
            return false;
        }

        if (confirm("Are you sure you want to send this folder to trash? Any files within the folder will also be sent to trash."))
        {
            trashFolder(folderId);
        }

        return false;
    }

    function trashFolder(folderId)
    {
        // trash files
	$.ajax({
		type: "POST",
		url: ACCOUNT_WEB_ROOT+"/ajax/trash_files",
		data: {fileIds: '', folderIds: folderId},
		dataType: 'json',
		success: function(json) {
                    if (json.error == true)
                    {
                        showErrorNotification('Error', json.msg);
                    }
                    else
                    {
                        // refresh treeview
                        showSuccessNotification('Success', json.msg);
                        refreshFolderListing();
                    }
		},
		error: function(XMLHttpRequest, textStatus, errorThrown) {
                    showErrorNotification('Error', 'General error');
		}
	});
    }


    function confirmEmptyTrash()
    {
        if (confirm("Are you sure you want to empty the trash can? Any statistics and other file information will be permanently deleted."))
        {
            emptyTrash();
        }

        return false;
    }

    function emptyTrash()
    {
        $.ajax({
            dataType: "json",
            url: "https://versesai.online/account/ajax/empty_trash",
            success: function (data) {
                if (data.error == true)
                {
                    alert(data.msg);
                }
                else
                {
                    // reload file listing
                    loadImages('trash');

                    // reload stats
                    updateStatsViaAjax();
                }
            }
        });
    }

    var hideLoader = false;
    function loadFiles(folderId)
    {
        // get variables
        if (typeof (folderId) == 'undefined')
        {
            folderId = $('#nodeId').val();
        }

        loadImages('folder', folderId);
    }

    function dblClickFile(fileId)
    {

    }
	
	function clearExistingHoverFileItem()
	{
		$('.hoverItem').removeClass('hoverItem');
	}

    function showFileMenu(liEle, clickEvent)
    {
        clickEvent.stopPropagation();
        hideOpenContextMenus();
		
        fileId = $(liEle).attr('fileId');
        downloadUrl = $(liEle).attr('dtfullurl');
        statsUrl = $(liEle).attr('dtstatsurl');
        isDeleted = $(liEle).hasClass('fileDeletedLi');
        fileName = $(liEle).attr('dtfilename');
        extraMenuItems = $(liEle).attr('dtextramenuitems');
        var items = {
            "Stats": {
                "label": "Stats",
                "icon": "glyphicon glyphicon-stats",
                "action": function (obj) {
                    showStatsPopup(fileId);
                }
            },
            "Select": {
                "label": "Select File ",
                "icon": "glyphicon glyphicon-check",
                "action": function (obj) {
                    selectFile(fileId, true);
                }
            },
            "Restore": {
                "label": "Restore",
                "icon": "glyphicon glyphicon-export",
                "separator_after": false,
                "action": function (obj) {
                    selectFile(fileId, true);
                    restoreItems();
                }
            },
            "Delete": {
                "label": "Permanently Delete",
                "icon": "glyphicon glyphicon-remove",
                "separator_after": false,
                "action": function (obj) {
                    selectFile(fileId, true);
                    deleteFiles();
                }
            }
        };

        if (isDeleted == false)
        {
            var items = {};

            // replace any items for overwriting (plugins)
            if (extraMenuItems.length > 0)
            {
                items = JSON.parse(extraMenuItems);
                for (i in items)
                {
                    // setup click action on menu item
                    eval("items['" + i + "']['action'] = " + items[i]['action']);
                }
            }
			
            // default menu items
            items["View"] = {
                "label": "View",
                "icon": "glyphicon glyphicon-zoom-in",
                "action": function (obj) {
                    showFile(fileId);
                }
            };

            items["Download"] = {
                "label": "Download " + htmlEntities(fileName),
                "icon": "glyphicon glyphicon-download-alt",
                "action": function (obj) {
                    openUrl('https://versesai.online/account/direct_download/' + fileId);
                }
            };
            
            items["Share"] = {
                "label": "Share",
                "icon": "glyphicon glyphicon-share",
                "separator_after": true,
                "action": function (obj) {
                    selectFile(fileId, true);
                    showSharingForm();
                }
            };

            items["Edit"] = {
                "label": "Edit File Info",
                "icon": "glyphicon glyphicon-pencil",
                "action": function (obj) {
                    showEditFileForm(fileId);
                }
            };
			
            items["Duplicate"] = {
                "label": "Create Copy",
                "icon": "glyphicon glyphicon-plus-sign",
                "action": function (obj) {
                selectFile(fileId, true);
                    duplicateFiles();
                }
            };

            items["Delete"] = {
                "label": "Delete",
                "icon": "glyphicon glyphicon-trash",
                "separator_after": true,
                "action": function (obj) {
                    selectFile(fileId, true);
                    trashFiles();
                }
            };
			
            items["Copy"] = {
                "label": "Copy Url to Clipboard",
                "icon": "entypo entypo-clipboard",
                "classname": "fileMenuItem"+fileId,
                "separator_after": true,
                "action": function (obj) {
                    selectFile(fileId, true);
                    fileUrlText = '';
                    for (i in selectedFiles)
                    {
                        fileUrlText += selectedFiles[i][3] + "<br/>";
                    }
                    $('#clipboard-placeholder').html(fileUrlText);
                    copyToClipboard('.fileMenuItem'+fileId);
                }
            };

            items["Select"] = {
                "label": "Select File ",
                "icon": "glyphicon glyphicon-check",
                "action": function (obj) {
                    selectFile(fileId, true);
                }
            };

            items["Links"] = {
                "label": "Links",
                "icon": "glyphicon glyphicon-link",
                "action": function (obj) {
                    selectFile(fileId, true);
                    viewFileLinks();
                    // clear selected if only 1
                    if (countSelected() == 1)
                    {
                        clearSelectedItems();
                    }
                }
            };

            items["Stats"] = {
                "label": "Stats",
                "icon": "glyphicon glyphicon-stats",
                "action": function (obj) {
                    showStatsPopup(fileId);
                }
            };

            // replace any items for overwriting
            for (i in extraMenuItems)
            {
                if (typeof (items[i]) != 'undefined')
                {
                    items[i] = extraMenuItems[i];
                }
            }
        }
        $.vakata.context.show(items, $(liEle), clickEvent.pageX - 15, clickEvent.pageY - 8, liEle);
        return false;
    }
	
    function showFolderMenu(liEle, clickEvent)
    {
        clickEvent.stopPropagation();
        var folderId = $(liEle).attr('folderId');
        var isDeleted = $(liEle).hasClass('folderDeletedLi');
        if(isDeleted == false) {
            var items = {
                "Upload": {
                    "label": "Upload Files",
                    "icon": "glyphicon glyphicon-cloud-upload",
                    "separator_after": true,
                    "action": function (obj) {
                        uploadFiles(folderId);
                    }
                },
                "Add": {
                    "label": "Add Sub Folder",
                    "icon": "glyphicon glyphicon-plus",
                    "action": function (obj) {
                        showAddFolderForm(folderId);
                    }
                },
                "Edit": {
                    "label": "Edit",
                    "icon": "glyphicon glyphicon-pencil",
                    "action": function (obj) {
                        showAddFolderForm(null, folderId);
                    }
                },
                "Delete": {
                    "label": "Delete",
                    "icon": "glyphicon glyphicon-trash",
                    "action": function (obj) {
                        selectFolder(folderId, true);
                        trashFiles();
                    }
                },
                "Download": {
                    "label": "Download All Files (Zip)",
                    "icon": "glyphicon glyphicon-floppy-save",
                    "separator_before": true,
                    "action": function (obj) {
                        downloadAllFilesFromFolder(folderId);
                    }
                },
                "Copy": {
                    "label": "Copy Url to Clipboard",
                    "icon": "entypo entypo-clipboard",
                    "classname": "folderMenuItem"+folderId,
                    "separator_before": true,
                    "action": function (obj) {
                        $('#clipboard-placeholder').html($('#folderItem'+folderId).attr('sharing-url'));
                        copyToClipboard('.folderMenuItem'+folderId);
                    }
                },
                "Share": {
                    "label": "Share",
                    "icon": "glyphicon glyphicon-share",
                    "action": function (obj) {
                        selectFolder(folderId, true);
                        showSharingForm();
                    }
                }
            };
        }
        else {
            var items = {
                "Select": {
                    "label": "Select Folder ",
                    "icon": "glyphicon glyphicon-check",
                    "action": function (obj) {
                        selectFolder(folderId, true);
                    }
                },
                "Restore": {
                    "label": "Restore",
                    "icon": "glyphicon glyphicon-export",
                    "separator_after": false,
                    "action": function (obj) {
                        selectFolder(folderId, true);
                        restoreItems();
                    }
                },
                "Delete": {
                    "label": "Permanently Delete",
                    "icon": "glyphicon glyphicon-remove",
                    "separator_after": false,
                    "action": function (obj) {
                        selectFolder(folderId, true);
                        deleteFiles();
                    }
                }
            }
        }

        $.vakata.context.show(items, $(liEle), clickEvent.pageX - 15, clickEvent.pageY - 8, liEle);
        return false;
    }

    function selectFile(fileId, onlySelectOn)
    {
        if (typeof (onlySelectOn) == "undefined")
        {
            onlySelectOn = false;
        }

        // clear any selected if ctrl key not pressed
        if ((ctrlPressed == false) && (onlySelectOn == false))
        {
            showFileInformation(fileId);

            return false;
        }

        elementId = 'fileItem' + fileId;
        if (($('.' + elementId).hasClass('selected')) && (onlySelectOn == false))
        {
            $('.' + elementId).removeClass('selected');
            if (typeof (selectedFiles['k' + fileId]) != 'undefined')
            {
                delete selectedFiles['k' + fileId];
            }
        }
        else
        {
            $('.' + elementId + '.owned-image').addClass('selected');
            if ($('.' + elementId).hasClass('selected'))
            {
                selectedFiles['k' + fileId] = [fileId, $('.' + elementId).attr('dttitle'), $('.' + elementId).attr('dtsizeraw'), $('.' + elementId).attr('dtfullurl'), $('.' + elementId).attr('dturlhtmlcode'), $('.' + elementId).attr('dturlbbcode')];
            }
        }

        updateSelectedItemsStatusText();
        updateFileActionButtons();
    }
    
    function selectFolder(folderId, onlySelectOn)
    {
        if (typeof (onlySelectOn) == "undefined")
        {
            onlySelectOn = false;
        }

        // clear any selected if ctrl key not pressed
        if ((ctrlPressed == false) && (onlySelectOn == false))
        {
            loadFolderFiles(folderId);

            return false;
        }

        elementId = 'folderItem' + folderId;
        if (($('.' + elementId).hasClass('selected')) && (onlySelectOn == false))
        {
            $('.' + elementId).removeClass('selected');
            if (typeof (selectedFolders['k' + folderId]) != 'undefined')
            {
                delete selectedFolders['k' + folderId];
            }
        } else
        {
            $('.' + elementId).addClass('selected');
            if ($('.' + elementId).hasClass('selected'))
            {
                selectedFolders['k' + folderId] = [folderId];
            }
        }

        updateSelectedItemsStatusText();
        updateFileActionButtons();
    }

    var ctrlPressed = false;
    $(window).keydown(function (evt) {
        if (evt.which == 17) {
            ctrlPressed = true;
        }
    }).keyup(function (evt) {
        if (evt.which == 17) {
            ctrlPressed = false;
        }
    });

    $(window).keydown(function (evt) {
        if (evt.which == 65) {
            if (ctrlPressed == true)
            {
                selectAllFiles();
                return false;
            }
        }
    })

    function updateFileActionButtons()
    {
        totalSelected = countSelected();
        if (totalSelected > 0)
        {
            $('.fileActionLinks').removeClass('disabled');

        }
        else
        {
            $('.fileActionLinks').addClass('disabled');
        }
    }

    function viewFileLinks()
    {
        count = countSelected();
        if (count > 0)
        {
            fileUrlText = '';
            htmlUrlText = '';
            bbCodeUrlText = '';
            for (i in selectedFiles)
            {
                fileUrlText += selectedFiles[i][3] + "<br/>";
                htmlUrlText += selectedFiles[i][4] + "&lt;br/&gt;<br/>";
                bbCodeUrlText += '[URL='+selectedFiles[i][3]+']'+selectedFiles[i][3] + "[/URL]<br/>";
            }

            $('#popupContentUrls').html(fileUrlText);
            $('#popupContentHTMLCode').html(htmlUrlText);
            $('#popupContentBBCode').html(bbCodeUrlText);

            jQuery('#fileLinksModal').modal('show', {backdrop: 'static'}).on('shown.bs.modal');
        }
    }

    function showLightboxNotice()
    {
        jQuery('#generalModal').modal('show', {backdrop: 'static'}).on('shown.bs.modal', function () {
            $('.general-modal .modal-body').html($('#filePopupContentWrapperNotice').html());
        });
    }

    function showFileInformation(fileId)
    {
        // hide any context menus
        hideOpenContextMenus();

        // load overlay
        showFileInline(fileId);
    }

    function loadPage(startPos)
    {
        cancelPendingNetworkRequests();
        $('html, body').animate({
            scrollTop: $(".page-body").offset().top
        }, 700);
        pageStart = startPos;
        refreshFileListing();
    }

    function downloadAllFilesFromFolder(folderId)
    {
        // only allow actual sub folders
        if (isPositiveInteger(folderId) == false)
        {
            return false;
        }

        if (confirm("Are you sure you want to download all the files in this folder? This may take some time to complete."))
        {
            downloadAllFilesFromFolderConfirm(folderId);
        }

        return false;
    }

    function downloadAllFilesFromFolderConfirm(folderId)
    {
        $('.download-folder-modal .modal-body .col-md-9').html('');
        jQuery('#downloadFolderModal').modal('show', {backdrop: 'static'}).on('shown.bs.modal', function () {
            $('.download-folder-modal .modal-body .col-md-9').html('<iframe src="https://versesai.online/account/ajax/download_all_as_zip/' + folderId + '" style="zoom:0.60" width="99.6%" height="730" frameborder="0"></iframe>');
        });
    }

    function downloadAllFilesFromFolderPublic(folderId)
    {
        // only allow actual sub folders
        if (confirm("Are you sure you want to download all the files in this folder? This may take some time to complete."))
        {
            downloadAllFilesFromFolderPublicConfirm(folderId);
        }

        return false;
    }

    function downloadAllFilesFromFolderPublicConfirm(folderId)
    {
        $('.download-folder-modal .modal-body .col-md-9').html('');
        jQuery('#downloadFolderModal').modal('show', {backdrop: 'static'}).on('shown.bs.modal', function () {
            $('.download-folder-modal .modal-body .col-md-9').html('<iframe src="https://versesai.online/ajax/download_all_as_zip_public/' + folderId + '" style="zoom:0.60" width="99.6%" height="730" frameborder="0"></iframe>');
        });
    }
	
    function downloadAllFilesFromFolderShared(folderId)
    {
        if(typeof(folderId) === 'undefined') {
            folderId = 0;
        }
        
        msg = "Are you sure you want to download all the files in this share? This may take some time to complete.";
        if(folderId > 0) {
            msg = "Are you sure you want to download all the files in this folder? This may take some time to complete.";
        }
        if (confirm(msg))
        {
            downloadAllFilesFromFolderSharedConfirm(folderId);
        }

        return false;
    }
	
    function downloadAllFilesFromFolderSharedConfirm(folderId)
    {
        $('.download-folder-modal .modal-body .col-md-9').html('');
        jQuery('#downloadFolderModal').modal('show', {backdrop: 'static'}).on('shown.bs.modal', function () {
            $('.download-folder-modal .modal-body .col-md-9').html('<iframe src="https://versesai.online/ajax/non_account_download_all_as_zip?folderId='+folderId+'" style="zoom:0.60" width="99.6%" height="440" frameborder="0"></iframe>');
        });
    }
</script>


<script>
    function showAddFolderForm(parentId, editFolderId)
    {
        // only allow actual sub folders on edit
        if ((typeof (editFolderId) != 'undefined') && (isPositiveInteger(editFolderId) == false))
        {
            return false;
        }

        showLoaderModal();
        if (typeof (parentId) == 'undefined')
        {
            parentId = $('#nodeId').val();
        }

        if (typeof (editFolderId) == 'undefined')
        {
            editFolderId = 0;
        }

        jQuery('#addEditFolderModal .modal-content').load("https://versesai.online/account/ajax/add_edit_folder", {parentId: parentId, editFolderId: editFolderId}, function () {
            hideLoaderModal();
            jQuery('#addEditFolderModal').modal('show', {backdrop: 'static'}).on('shown.bs.modal', function () {
                assignModalEnterKey();
                $('#addEditFolderModal input').first().focus();
            });
        });
    }

    var folderArray = [];
    function markInternalNotificationsRead()
    {
        $.ajax({
            dataType: "json",
            url: "https://versesai.online/account/ajax/internal_notification_mark_all_read",
            success: function (data) {
                $('.internal-notification .unread').addClass('read').removeClass('unread');
                $('.internal-notification .text-bold').removeClass('text-bold');
                $('.internal-notification .badge').hide();
                $('.internal-notification .unread-count').html('You have 0 new notifications.');
                $('.internal-notification .mark-read-link').hide();
            }
        });
    }

    progressWidget = null;
    function showProgressWidget(intialText, title, complete, timeout)
    {
		if(typeof(timeout) == "undefined")
		{
			timeout = 0;
		}
		
        if (progressWidget != null)
        {
            progressWidget.hide();
        }

        var opts = {
            "closeButton": false,
            "debug": false,
            "positionClass": "toast-bottom-right",
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": timeout,
            "extendedTimeOut": "0",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut",
            "onclick": function () {
                showUploaderPopup();
            }
        };

        if (complete == true)
        {
            progressWidget = toastr.success(intialText, title, opts);
        }
        else
        {
            progressWidget = toastr.info(intialText, title, opts);
        }
    }

    function updateProgressWidgetText(text)
    {
        if (progressWidget == null)
        {
            return false;
        }

        $(progressWidget).find('.toast-message').html(text);
    }

    function checkShowUploadProgressWidget()
    {
        if (uploadComplete == false)
        {
            showProgressWidget("Uploading...", "Upload Progress:", false);
        }
    }

    function checkShowUploadFinishedWidget()
    {
        showProgressWidget("Upload complete.", "Upload Progress:", true, 6000);
    }

    function updateStatsViaAjax()
    {
        // first request stats via ajax
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "https://versesai.online/account/ajax/get_account_file_stats",
            success: function (data) {
                updateOnScreenStats(data);
            }
        });
    }

    function updateOnScreenStats(data)
    {
        // update list of folders for breadcrumbs
        folderArray = jQuery.parseJSON(data.folderArray);

        // update folder drop-down list in the popup uploader
        $("#folder_id").html(data.folderSelectForUploader);

        // update root folder stats
        if (data.totalRootFiles > 0)
        {
            $("#folderTreeview").jstree('set_text', '#-1', $('#-1').attr('original-text') + ' (' + data.totalRootFiles + ')');
        }
        else
        {
            $("#folderTreeview").jstree('set_text', '#-1', $('#-1').attr('original-text'));
        }

        // update trash folder stats
        if (data.totalTrashFiles > 0)
        {
            $("#folderTreeview").jstree('set_text', '#trash', $('#trash').attr('original-text') + ' (' + data.totalTrashFiles + ')');
        }
        else
        {
            $("#folderTreeview").jstree('set_text', '#trash', $('#trash').attr('original-text'));
        }
        
        // update trash folder stats
        if (data.totalShareWithMeFiles > 0)
        {
            $("#folderTreeview").jstree('set_text', '#shared', $('#shared').attr('original-text') + ' (' + data.totalShareWithMeFiles + ')');
        }
        else
        {
            $("#folderTreeview").jstree('set_text', '#shared', $('#shared').attr('original-text'));
        }

        // update all folder stats
        $("#folderTreeview").jstree('set_text', '#all', $('#all').attr('original-text') + ' (' + data.totalActiveFiles + ')');

        // update total storage stats
        $(".remaining-storage .progress .progress-bar").attr('aria-valuenow', data.totalStoragePercentage);
        $(".remaining-storage .progress .progress-bar").width(data.totalStoragePercentage + '%');
        $("#totalActiveFileSize").html(data.totalActiveFileSizeFormatted);
    }

    function isDesktopUser()
    {
        if ((getBrowserWidth() <= 1024) && (getBrowserWidth() > 0))
        {
            return false;
        }

        return true;
    }

    function getBrowserWidth()
    {
        return $(window).width();
    }

    function duplicateFiles()
    {
        if (countSelected() > 0)
        {
            duplicateFilesConfirm();
        }

        return false;
    }

    function duplicateFilesConfirm()
    {
        // show loader
        showLoaderModal(0);

        // prepare file ids
        fileIds = [];
        for (i in selectedFiles)
        {
            fileIds.push(i.replace('k', ''));
        }

        // duplicate files
        $.ajax({
            type: "POST",
            url: "https://versesai.online/account/ajax/duplicate_file",
            data: {fileIds: fileIds},
            dataType: 'json',
            success: function (json) {
                if (json.error == true)
                {
                    // hide loader
                    hideLoaderModal();
                    $('#filePopupContentNotice').html(json.msg);
                    showLightboxNotice();
                }
                else
                {
                    // done
                    addBulkSuccess(json.msg);
                    finishBulkProcess();
                }

            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                $('#popupContentNotice').html('Failed connecting to server, please try again later.');
                showLightboxNotice();
            }
        });
    }
</script>

<script type="text/javascript">
    function showFileInline(fileId)
    {
        showFile(fileId);
    }

    function showImageBrowseSlide(folderId)
    {
        $('#imageBrowseWrapper').show();
        $('#albumBrowseWrapper').hide();
        loadFiles(folderId);
    }

    function handleTopSearch(event, ele, isAdvSearch)
    {
		// make sure we have a default setting for advance search
		if(typeof(isAdvSearch) == 'undefined')
		{
			isAdvSearch = false;
		}
		
		searchText = $(ele).val();
        $('#filterText').val(searchText);

        // check for enter key
		doSearch = false;
		if(event == null)
		{
			doSearch = true;
		}
		else
		{
			var charCode = (typeof event.which === "number") ? event.which : event.keyCode;
			if (charCode == 13)
			{
				doSearch = true;
			}
		}
		
		// do search
		if(doSearch == true)
		{
			// make sure we have something to search
			if(searchText.length == 0)
			{
				showErrorNotification('Error', 'Please enter something to search for.');
				return false;
			}
			
			filterAllFolders = false;
			filterUploadedDateRange = '';
			if(isAdvSearch == true)
			{
				if($('#filterAllFolders').is(':checked'))
				{
					filterAllFolders = true;
				}
				filterUploadedDateRange = $('#filterUploadedDateRange').val();
			}
			
			url = 'https://versesai.online/account/search/?filterAllFolders='+filterAllFolders+'&filterUploadedDateRange='+filterUploadedDateRange+'&t='+encodeURIComponent(searchText);
			window.location = url;
		}

        return false;
    }
	
    function showSharingForm(folderId)
    {
        // if we have the folderId as a param, assume we just want to share this
        if(typeof(folderId) !== "undefined") {
            fileIds = [];
            folderIds = [];
            folderIds.push(folderId);
        }
        else {
            // prepare item ids
            fileIds = getAllSelectedFileIds();
            folderIds = getAllSelectedFolderIds();
        }
        
        showLoaderModal();
        jQuery('#shareFolderModal .modal-content').load("https://versesai.online/account/ajax/share_file_folder", {fileIds: fileIds, folderIds: folderIds}, function () {
            hideLoaderModal();
            jQuery('#shareFolderModal').modal('show', {backdrop: 'static'});
            createdUrl = false;
            setupPostPopup();
        });
    }
	
	function setupPostPopup()
	{
            // hover over tooptips
            setupToolTips();

            // radios
            replaceCheckboxes();

            // block enter key from being pressed
            $('#registeredEmailAddress').keypress(function (e) {
                    if (e.which == 13)
                    {
                            return false;
                    }
            });
	}
	
	function shareFolderInternally(fileIds, folderIds)
	{
            setShareFolderButtonLoading();
            $.ajax({
                dataType: "json",
                method: "post",
                url: "https://versesai.online/account/ajax/share_file_folder_internally",
                data: {fileIds: fileIds, folderIds: folderIds, registeredEmailAddress: $('#registeredEmailAddress').val(), permissionType: $('input[name=permission_radio]:checked').val()},
                success: function (data) {
                    if (data.error == true)
                    {
                        showErrorNotification('Error', data.msg);
                        clearShareFolderButtonLoading();
                    }
                    else
                    {
                        $('#registeredEmailAddress').val('');
                        loadExistingInternalShareTable(fileIds, folderIds);
                        clearShareFolderButtonLoading();
                        showSuccessNotification('Success', data.msg);
                    }
                }
            });
	}
	
	function loadExistingInternalShareTable(fileIds, folderIds)
	{
            $('#existingInternalShareTable').load("https://versesai.online/account/ajax/share_file_folder_internally_existing", {fileIds: fileIds, folderIds: folderIds}).hide().fadeIn();
	}
	
	function shareFolderInternallyRemove(folderShareId, fileIds, folderIds)
	{
            $.ajax({
                dataType: "json",
                url: "https://versesai.online/account/ajax/share_file_folder_internally_remove",
                data: {folderShareId: folderShareId},
                success: function (data) {
                    if (data.error == true)
                    {
                        showErrorNotification('Error', data.msg);
                    }
                    else
                    {
                        loadExistingInternalShareTable(fileIds, folderIds);
                        showSuccessNotification('Success', data.msg);
                    }
                }
            });
	}
	
	function setShareFolderButtonLoading()
	{
            $('#shareFolderInternallyBtn').removeClass('btn-info');
            $('#shareFolderInternallyBtn').addClass('btn-default disabled');
            $('#shareFolderInternallyBtn').html("Processing <i class=\"entypo-arrows-cw\"></i>");
	}
	
	function clearShareFolderButtonLoading()
	{
            $('#shareFolderInternallyBtn').removeClass('btn-default disabled');
            $('#shareFolderInternallyBtn').addClass('btn-info');
            $('#shareFolderInternallyBtn').html("Grant Access <i class=\"entypo-lock\"></i>");
	}
	
	function copyToClipboard(ele)
	{
            destroyClipboard();
            clipboard = new Clipboard(ele);
            clipboard.on('success', function(e) {
                showSuccessNotification('Success', 'Copied to clipboard.');
                $('#clipboard-placeholder').html('');
            });

            clipboard.on('error', function(e) {
                showErrorNotification('Error', 'Failed copying to clipboard.');
            });
	}
	
	function destroyClipboard()
	{
            if(clipboard != null)
            {
                clipboard.destroy();
            }
	}
	
	callbackcheck = false;
	function showStatsPopup(fileId)
        {
            showLoaderModal();
            jQuery('#statsModal .modal-content').load("https://versesai.online/account/ajax/file_stats", {fileId: fileId}, function () {
                hideLoaderModal();
                jQuery('#statsModal').modal('show', {backdrop: 'static'}).on('show', function() {
                    callbackcheck = setTimeout(function(){
                        redrawCharts();
                        clearTimeout(callbackcheck);
                    }, 100);
                });
            });
        }
	
	var createdUrl = false;
	function generateFolderSharingUrl(fileIds, folderIds)
	{
            $.ajax({
                dataType: "json",
                method: "post",
                url: "https://versesai.online/account/ajax/generate_folder_sharing_url",
                data: {fileIds: fileIds, folderIds: folderIds},
                success: function (data) {
                    if (data.error == true)
                    {
                        showErrorNotification('Error', data.msg);
                    }
                    else
                    {
                        $('#sharingUrlInput').html(data.msg);
                        $('#shareEmailSharingUrl').html(data.msg);
                        $('#nonPublicSharingUrls').fadeIn();
                        $('#nonPublicSharingUrls').html($('.social-wrapper-template').html().replace(/SHARE_LINK/g, data.msg));
                        $('#nonPublicSharingUrls').removeClass('disabled');
                        createdUrl = true;
                    }
                }
            });
	}
        
        function checkSocialLink(ele) {
            // alert if link has not been generated
            if($(ele).attr('href').indexOf('SHARE_LINK') !== -1) {
                showErrorNotification("Please generate the sharing url to enable social sharing.");
                return false;
            }

            return true;
        }
        
        function togglePublicAccessUrl() {
            if($('#isPublic').val() === '1') {
                $('.public-access-url').show();
            }
            else {
                $('.public-access-url').hide();
            }
        }
</script>    </head>
    <body class="page-body">
        <div class="page-container horizontal-menu with-sidebar fit-logo-with-sidebar logged-in">	

            <div class="sidebar-menu fixed">
                <div class="sidebar-mobile-menu visible-xs"> <a href="#" class="with-animation"><i class="entypo-menu"></i> </a> </div>
                                    <div class="sidebar-mobile-upload visible-xs"><a href="#" onClick="uploadFiles();
                        return false;">Upload&nbsp;&nbsp;<span class="glyphicon glyphicon-cloud-upload"></span></a> </div>
                        
                <!-- logo -->
                <div class="siderbar-logo">
                    <a href="https://versesai.online/">
                        <img src="https://versesai.online/themes/evolution/assets/images/logo/logo.png" alt="VerseDrive" />
                    </a>
                </div>
                <div id="folderTreeview"></div>
                <div class="clear"></div>
            </div>

            <header class="navbar navbar-fixed-top"><!-- set fixed position by adding class "navbar-fixed-top" -->
                <div class="navbar-inner">
                                            <form autocomplete="off">
                            <div class="navbar-form navbar-form-sm navbar-left shift" ui-shift="prependTo" data-target=".navbar-collapse" role="search">
                                <div class="form-group">
                                    <div class="input-group" id="top-search">
                                        <input name="searchInput" id="searchInput" type="text" value="" class="form-control input-sm bg-light no-border rounded padder typeahead" placeholder="Search your files..." onKeyUp="handleTopSearch(event, this); return false;"/>
                                        <span class="input-group-btn">
                                            <button type="submit" class="btn btn-sm bg-light rounded" onClick="handleTopSearch(null, $('#searchInput'));
                                                return false;" title="" data-original-title="Filter" data-placement="bottom" data-toggle="tooltip"><i class="entypo-search"></i></button>
                                            <button type="submit" class="btn btn-sm bg-light rounded" onClick="showFilterModal();
                                                return false;" title="" data-original-title="Advanced Search" data-placement="bottom" data-toggle="tooltip"><i class="entypo-cog"></i></button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </form>
                    
                                            <div class="upload-button-wrapper pull-left" style="display: none;">
                            <button class="btn btn-green" type="button" onClick="uploadFiles();
                                return false;">Upload&nbsp;&nbsp;<span class="glyphicon glyphicon-cloud-upload"></span></button>
                        </div>
                    
                    <div class="header-home-button pull-left">
                        <a href="#" onClick="loadImages(currentPageType, -1, 1); return false;">
                            <i class="glyphicon glyphicon-home"></i>
                        </a>
                    </div>

                    <ul class="mobile-account-toolbar-wrapper nav navbar-right pull-right">

                                                                                    <li class="root-level responsive-Hide">
                                    <a href="https://versesai.online/admin/" target="_blank">
                                        <span class="badge badge-danger badge-roundless">ADMIN USER</span>
                                    </a>
                                </li>
                            
                            <li class="dropdown account-nav-icon">
                                <a href="#" data-toggle="dropdown" class="dropdown-toggle clear">
                                    <span class="thumb-sm avatar pull-right">
                                        <img width="40" height="40" class="img-circle" alt="Admin" src="https://versesai.online/account/avatar/1/110x110.png?r=1709317623"/>
                                    </span>
                                    <span class="user-screen-name hidden-sm hidden-md">Admin</span> <b class="caret"></b>
                                </a>
                                <!-- dropdown -->
                                <ul class="dropdown-menu">
                                    <li class="account-menu bg-light" title="Unlimited" onClick="window.location = 'https://versesai.online/account/edit';" style="cursor: pointer;">
                                        <div>
                                            <p>
                                                                                                    <span><span id="totalActiveFileSize"></span> of Unlimited</span>
                                                                                            </p>
                                        </div>
                                        <div class="progress progress-xs m-b-none dker">
                                            <div style="width: %" aria-valuemax="100" aria-valuemin="0" aria-valuenow="" role="progressbar" class="progress-bar progress-bar-success"></div>
                                        </div>
                                    </li>
                                    <li>
                                        <a href="https://versesai.online/account/edit"> <i class="entypo-cog"></i>Account Settings</a>
                                    </li>
                                    <li>
                                        <a href="https://versesai.online/account/shared_with_me"></i> <i class="entypo-users"></i>Shared Files</a>
                                    </li>
                                    <li>
                                        <a href="https://versesai.online/account/trash"></i> <i class="entypo-trash"></i>Trash Can</a>
                                    </li>
                                    <li class="divider"></li>
                                                                                <li>
                                            <a href="https://versesai.online/admin/" target="_blank"></i> <i class="entypo-user"></i>Admin Area</a>
                                        </li>
                                        <li class="divider"></li>
                                                                            <li>
                                        <a href="https://versesai.online/account/logout"> <i class="entypo-logout"></i>Logout</a>
                                    </li>
                                </ul>
                                <!-- / dropdown -->
                            </li>
                                            </ul>
                </div>
            </header>

            <div id="main-ajax-container" class="layer"></div>

            <script>
    $(document).ready(function() {
        loadImages('folder', '-1', 1, 0, '', {'searchTerm': "", 'filterUploadedDateRange': ""});

        $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            // sometimes hidden image thumbnails don't get rendered correct, so fix
            fixImageBrowseHeights('#browse-images');
        });
    });
    </script>

    </div>

<!-- uploader -->
<div id="fileUploadWrapper" class="modal fade file-upload-wrapper">
    <div class="modal-dialog">
        <div class="modal-content">
            Loading, please wait...
        </div>
    </div>
</div>

<div id="filePopupContentWrapper" style="display: none;">
    <div id="filePopupContent" class="filePopupContent"></div>
</div>

<div id="filePopupContentWrapperNotice" style="display: none;">
    <div id="filePopupContentNotice" class="filePopupContentNotice"></div>
</div>

<!-- filter modal -->
<div class="modal fade custom-width filter-modal" id="filterModal">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Search Your Files</h4>
            </div>

            <div class="modal-body">
                <form autocomplete="off">
                    <div class="row">

                        <div class="col-md-3">
                            <div class="modal-icon-left"><img src="https://versesai.online/themes/evolution/assets/images/modal_icons/file_search.png"/></div>
                        </div>

                        <div class="col-md-9">

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="filterText" class="control-label">Search</label>
                                        <input type="text" class="form-control" name="filterText" id="filterText" placeholder="Freetext search..." value="">
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">&nbsp;</label>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="" id="filterCurrentFolder" name="folderId" CHECKED>Current Folder
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label class="control-label">&nbsp;</label>
                                        <div class="radio">
                                            <label>
                                                <input type="radio" value="all" id="filterAllFolders" name="folderId">All Folders
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-12">
                                    <div class="form-group">
                                        <label for="filterUploadedDateRange" class="control-label">Upload Date</label>
                                        <div class="daterange daterange-inline" data-format="MMMM D, YYYY" data-start-date="January 31, 2024" data-end-date="March 1, 2024" data-callback="">
                                             <i class="entypo-calendar"></i>
                                            <span>Select range...</span>
                                        </div>
                                        <input type="hidden" name="filterUploadedDateRange" id="filterUploadedDateRange" value=""/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-info" onClick="handleTopSearch(null, $('#filterText'), true);
                        return false;">Search <i class="entypo-search"></i></button>
            </div>
        </div>
    </div>
</div>

<!-- add/edit folder -->
<div id="addEditFolderModal" class="modal fade custom-width edit-folder-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            Loading, please wait...
        </div>
    </div>
</div>

<!-- edit file -->
<div id="editFileModal" class="modal fade custom-width edit-file-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            Loading, please wait...
        </div>
    </div>
</div>

<!-- share folder -->
<div id="shareFolderModal" class="modal fade custom-width edit-folder-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            Loading, please wait...
        </div>
    </div>
</div>

<!-- stats -->
<div id="statsModal" class="modal fade custom-width stats-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            Loading, please wait...
        </div>
    </div>
</div>

<!-- links -->
<div id="fileLinksModal" class="modal fade custom-width file-links-wrapper" style="z-index: 10000;">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">File Urls</h2>
            </div>

            <div class="modal-body">
                <div class="row">

                    <div class="col-md-3">
                        <div class="modal-icon-left"><img src="https://versesai.online/themes/evolution/assets/images/modal_icons/link.png"/></div>
                    </div>

                    <div class="col-md-9">
                        <samp>
                             <div id="popupContentUrls" class="link-section" onClick="selectAllText(this);
                                                                return false;"></div>
                                 <div id="popupContentHTMLCode" class="link-section" style="display: none;" onClick="selectAllText(this);
                                                                return false;"></div>
                                 <div id="popupContentBBCode" class="link-section" style="display: none;" onClick="selectAllText(this);
                                                                return false;"></div>
                        </samp>
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-8 text-left">
                        <div class="btn-group">
                            <button type="button" class="btn btn-info active" onClick="showLinkSection('popupContentUrls', this);
                                    return false;">File Urls</button>
    <button type="button" class="btn btn-info" onClick="showLinkSection('popupContentHTMLCode', this);
                                    return false;">HTML Code</button>
                            <button type="button" class="btn btn-info" onClick="showLinkSection('popupContentBBCode', this);
                                    return false;">Forum BBCode</button>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- download folder modal -->
<div id="downloadFolderModal" class="modal fade custom-width custom-width download-folder-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Download Zip File</h2>
            </div>

            <div class="modal-body" style="height: 440px;">
                <div class="row">
                    <div class="col-md-3">
                        <div class="modal-icon-left"><img src="https://versesai.online/themes/evolution/assets/images/modal_icons/box_download.png"/></div>
                    </div>

                    <div class="col-md-9"></div>
                </div>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- view file details modal -->
<div id="fileDetailsModal" class="modal fade custom-width file-details-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            Loading, please wait...
        </div>
    </div>
</div>

<!-- general notice modal -->
<div id="generalModal" class="modal fade custom-width general-modal">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- for full screen images -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory. Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>
<!-- Bottom Scripts -->
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/gsap/main-gsap.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/bootstrap.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/joinable.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/resizeable.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/evolution-api.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/toastr.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/custom.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/handlebars.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/typeahead.bundle.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/search_widget.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/clipboardjs/clipboard.min.js"></script>
<script type="text/javascript" src="https://versesai.online/themes/evolution/assets/js/bootstrap-tagsinput.min.js"></script>

<script src="https://versesai.online/themes/evolution/assets/js/file-manager-gallery/jquery.wookmark.js" type="text/javascript"></script>

<div class="clipboard-placeholder-wrapper">
    <button id="clipboard-placeholder-btn" type="button" data-clipboard-action="copy" data-clipboard-target="#clipboard-placeholder"></button>
    <div id="clipboard-placeholder"></div>
</div>


</body>
</html>